<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head', {
    title : 'AGREGAR'
}) %>

    <body>
        <%- include('../partials/header') %>
            <main class="container">
                <div class="row mt-5 mb-5">
                    <div class="col-12 col-md-10 col-lg-8  mx-auto">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Nuevo producto</h3>
                            </div>
                            <div class="card-body">
                                <form action="" method="POST" class="row" enctype="multipart/form-data">
                                    <div class="col-12 col-md-6 col-lg-12 mb-3">
                                        <label for="name" class="form-label">Nombre</label>
                                        <input type="text" class="form-control <%= locals.errors && (errors.name && 'is-invalid') %>" id="name"
                                            placeholder="Nombre del producto" name="name" value="<%= locals.old && (old.name && old.name) %>">
                                            <small class="ms-1 text-danger"><%= locals.errors && (errors.name && errors.name.msg) %></small>
                                    </div>

                                    <div class="col-12 col-md-4 mb-3">
                                        <label for="category" class="form-label">Categoria</label>
                                        <select class="form-select <%= locals.errors && (errors.category && 'is-invalid') %>" aria-label="Default select example" name="category" id="category">
                                            <option selected hidden value="">Seleccione...</option>
                                            <% categories.forEach(category => { %>
                                                <option value="<%= category.id %>" <%= locals.old && (old.category === category.id && 'selected') %>><%= category.name %> </option>
                                            <% }) %>
                                        </select>
                                        <small class="ms-1 text-danger"><%= locals.errors && (errors.category && errors.category.msg) %></small>
                                    </div>
                                    

                                    <div class="col-12 col-md-4 mb-3">
                                        <label for="brand" class="form-label">Marca</label>
                                        <select class="form-select <%= locals.errors && (errors.brand && 'is-invalid') %>" aria-label="Default select example" name="brand" id="brand">
                                            <option selected hidden value="">Seleccione...</option>
                                            <% brands.forEach(brand => { %>
                                                <option value="<%= brand.id %>" <%= locals.old && (old.brand === brand.id && 'selected') %>><%= brand.name %> </option>
                                            <% }) %>
                                        </select>
                                        <small class="ms-1 text-danger"><%= locals.errors && (errors.brand && errors.brand.msg) %></small>
                                    </div>

                                    <div class="col-12 col-md-4 mb-3">
                                        <label for="section" class="form-label">Sección</label>
                                        <select class="form-select <%= locals.errors && (errors.section && 'is-invalid') %>" aria-label="Default select example" name="section" id="section">
                                            <option selected hidden value="">Seleccione...</option>
                                            <% sections.forEach(section => { %>
                                                <option value="<%= section.id %>" <%= locals.old && (old.section === section.id && 'selected') %>><%= section.name %> </option>
                                            <% }) %>
                                        </select>
                                        <small class="ms-1 text-danger"><%= locals.errors && (errors.section && errors.section.msg) %></small>
                                    </div>
                                    
                                    <div class="col-12 col-md-6 mb-3">
                                        <label for="price" class="form-label">Precio</label>
                                        <input type="number" class="form-control" id="price" name="price" value="<%= locals.old && (old.name && old.name) %>">
                                        <small class="ms-1 text-danger"><%= locals.errors && (errors.price && errors.price.msg) %></small>
                                    </div>
                                    <div class="col-12 col-md-6 mb-3">
                                        <label for="discount" class="form-label">Descuento</label>
                                        <input type="number" class="form-control" id="discount" name="discount">
                                    </div>

                                    
                                    <div class="col-12  mb-3">
                                        <label for="image" class="form-label">Imagen principal</label>
                                        <input class="form-control" type="file" id="image" name="image">
                                        <small class="ms-1 text-danger"><%= locals.errors && (errors.images && errors.images.msg) %></small>
                                    </div>
                                    <div class="col-12  mb-3">
                                        <label for="images" class="form-label">Agregar imágenes</label>
                                        <input class="form-control" type="file" id="images" name="images" multiple >
                                        <small class="ms-1 text-danger"><%= locals.errors && (errors.images && errors.images.msg) %></small>
                                    </div>
                                    <div class="col-12  mb-3">
                                        <label for="description" class="form-label">Descripción</label>
                                        <textarea class="form-control" style="resize: none;" name="description"
                                            id="description"><%= locals.old && (old.description && old.description) %></textarea>
                                            <small class="ms-1 text-danger"><%= locals.errors && (errors.description && errors.description.msg) %></small>
                                    </div>
                                    
                                    <div class="col-12 d-flex justify-content-end gap-2 mb-3">
                                        <a href="/admin" class="btn btn-success me-auto">Volver</a>
                                        
                                        <button class="btn btn-success" type="submit">Guardar nuevo producto</button>
                                        
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <%- include('../partials/footer') %>

    </body>

</html>